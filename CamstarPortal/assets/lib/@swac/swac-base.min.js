/* Version 1.5.1, copyright (C) 2019, Siemens AG. All Rights Reserved. */

!function(){var V,e,p,u,f,h,v,o,n,m,r,a,t,s;try{var i=function(){};if(!window.SWAC||"object"==typeof window.SWAC&&"object"!=typeof window.SWAC.Communication||void 0===window.SWAC)(V=i.prototype).isContainer=!0,V.version="1.5.1",V.Config={TimeOuts:{Enabled:!0,Create:1e3,Remove:2e3,CleanUp:2e4,Internal:1e3,Close:6e4,Proxy:{Functions:2e3,Events:1e3},Authentication:{Handshake:1e4}},Container:{URLs:{BaseLibrary:""},Authentication:{Request:!1,TlsHandler:null},Behaviors:{CloseOnCleanUpTimeOut:!0,AddDpcValues:!1}},Extensions:{},Control:{URLs:{BaseLibrary:""},Extensions:{}}},V.Exception=function(e){var n;isNaN(e)?(this.errorCode=-1,this.message=e):(this.errorCode=e,n=V.Exception.prototype.exceptionCodes[e],this.message="Internal Error",null!=n&&(this.message=n))},V.Exception.prototype=new Error,V.Exception.prototype={exceptionCodes:{1e3:"Only one instance of SWAC.Hub is allowed.",1001:"Component not found.",1002:"Corresponding node does no longer exist.",1003:"No compatible node for the given key.",1004:"No node for the given key.",1005:"Data node with different flags already exist.",1006:"Unable to set value on a structural node.",1007:"Handshake cannot be restarted.",1008:"Authorization handshake not active.",1009:"Handshake no longer active.",1010:"Unable to add and set a sub-key for a data node.",2001:"Permission denied.",3001:"Flags cannot be both Proxy and Stub.",3002:"Invalid Key, key not nullable.",3003:"Invalid Key, key must be a string.",3004:"Invalid Key. Not multiple key accepted.",3005:"Invalid Key. Key cannot start/end with a dot.",3006:"Invalid Key, key cannot be an empty string.",3007:"Invalid flags.",3008:"Value not validated.",3009:"Flags of parent node is 'none', child node must have the same flags value.",3010:"DPC name is not valid. It contains not Alphanumeric characters only underscores are allowed.",4001:"Converter function exception."}},V.Exception.prototype.constructor=V.Exception,V.Exception.prototype.toString=function(){return this.message},V.AccessViolationException=function(e){V.Exception.call(this,e)},V.AccessViolationException.prototype=new V.Exception,V.InvalidArgumentException=function(e){V.Exception.call(this,e)},V.InvalidArgumentException.prototype=new V.Exception,V.InternalException=function(e){V.Exception.call(this,e)},V.InternalException.prototype=new V.Exception,V._internal={},V._internal.Utils=function(){var e=null;e=Object.getOwnPropertyNames?function(e){return Object.getOwnPropertyNames(e)}:function(e){var n,t=[];if("object"==typeof e||"function"==typeof e)for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};var o=null;o=Array.isArray?function(e){return Array.isArray(e)}:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var n=null;n=Array.indexOf?function(e,n,t){return e.indexOf(n,t)}:function(e,n,t){if(o(e))for(var i=t||0,r=e.length;i<r;i++)if(e[i]===n)return i;return-1};var t=function(){return void 0!==V.BootInstance?V.BootInstance:void 0!==window.SWAC&&void 0!==window.SWAC.BootInstance?window.SWAC.BootInstance:"undefined"!=typeof SWACBoot?SWACBoot:"undefined"!=typeof WebCC?WebCC:null};return{getOwnPropertyNames:e,isArray:o,indexOf:n,trimRegex:/^\s+|\s+$/g,checkVersion:function(e,n){var t,i,r=0,o=0;return"string"!=typeof e||"string"!=typeof n?-1:(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==n.indexOf("-")&&(n=n.split("-")[0]),t=e.split("."),i=n.split("."),r=parseInt(t[0]),(o=parseInt(i[0]))<r?1:r<o?-1:(r=1e6*r+1e3*parseInt(t[1])+parseInt(t[2]),(o=1e6*o+1e3*parseInt(i[1])+parseInt(i[2]))<r?1:r<o?-1:0))},getFullName:function(){var e=t();return e&&void 0!==e._internal&&e._internal.containerInfo&&e._internal.containerInfo.details&&e._internal.containerInfo.details.path?e._internal.containerInfo.details.path.slice(0):e?null:["<root>"]},estractParameters:function(e){var n=!1,t=!1,i="",r=!1,o=1,a="function",s=[],l="",u=!1,f=0,c="",d=function(){var e=l.trim();0<e.length&&(s.push(e),l="")};if("function"!=typeof e)return null;for(c="  "+e+"        ";o<c.length;){if(0<i.length)c[o]===i&&"\\"!==c[o-1]&&(i="");else if(n)"*"===c[o]&&"/"===c[o+1]&&(o++,n=!1);else if(t)"\n"!==c[o+1]&&"\r"!==c[o+1]&&10!==c[o+1].charCodeAt(0)||(t=!1);else if('"'===c[o]||"'"===c[o])i=c[o],d();else if("/"===c[o])"*"===c[o+1]?n=!0:"/"===c[o+1]?t=!0:i="/",d();else if(r){if(f<=1&&(")"===c[o]||"="===c[o]&&">"===c[o+1])){d();break}","===c[o]&&"\\"!==c[o-1]?(d(),u=!0):"("===c[o]?(0===s.length&&(u=!0),f++):")"===c[o]?f--:"="===c[o]&&"\\"!==c[o-1]?(d(),u=!1):u&&0<c[o].trim().length&&(l+=c[o])}else if("f"===c[o]&&"\\"!==c[o-1]&&c.length-o>=a.length&&c.substr(o,a.length)===a)o+=a.length,r=!0;else{if("("===c[o]){r=!0;continue}if(0<c[o].trim().length){u=r=!0;continue}}o++}return s},getBootObj:t}}(),V.Guid=(e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},{generate:function(){return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}}),V.Eventing=((s=function(){this._listeners={}}).prototype={constructor:s,addListener:function(e,n){void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(n)},fire:function(n,e){var t,i=0,r=0;if("string"==typeof n&&(n={type:n}),!n.type)throw new Error("Event object missing 'type' property.");if(this._listeners[n.type]instanceof Array)if(t=this._listeners[n.type].slice(),e){var o=function(e){e.call(this,n)};for(r=t.length,i=0;i<r;i++)setTimeout(o(t[i]),0)}else for(r=t.length,i=0;i<r;i++)t[i].call(this,n)},removeListener:function(e,n){var t,i=0,r=0;if(this._listeners[e]instanceof Array)for(r=(t=this._listeners[e]).length,i=0;i<r;i++)if(t[i]===n){t.splice(i,1);break}}},{Event:function(e){var i=new s,r=e;return{fire:function(e,n){var t={type:r,data:e};i.fire(t,n)},subscribe:function(e){i.addListener(r,e)},unsubscribe:function(e){i.removeListener(r,e)}}},EventEx:s,Publisher:function(a){var s=[];return{notify:function(n,e){var t,i=s.slice(),r=function(e){n&&n.type===a?i[e].call(null,n):i[e].call(null,{type:a,data:n})},o=function(e){setTimeout(function(){r(e)},0)};for(t=0;t<i.length;t++)try{e?o(t):r(t)}catch(e){}return i.length},event:new V.Eventing.EventProxy(s)}},EventProxy:function(e){var t=e;return{subscribe:function(e){t.push(e)},unsubscribe:function(e){var n=V._internal.Utils.indexOf(t,e);-1!==n&&t.splice(n,1)}}}}),V.Defer=function(){this.promise=new V.Promise},V.Defer.prototype={fulfill:function(e){var n,t=this.promise;if("pending"===t.status)for(t.value=e,t.status="fulfilled",n=0;n<t._internal.fulfilled.length;n++)t._internal.executeCallback(t._internal.fulfilled[n].func,t._internal.fulfilled[n].defer,e,t.status)},reject:function(e){var n,t=this.promise;if("pending"===t.status)for(t.reason=e,t.status="rejected",n=0;n<t._internal.rejected.length;n++)t._internal.executeCallback(t._internal.rejected[n].func,t._internal.rejected[n].defer,e,t.status)},bind:function(e){var n=this;return!(!e||!e.then||(e.then(function(e){n.fulfill(e)},function(e){n.reject(e)}),0))}},V.Promise=function(){this._internal={executeCallback:function(e,n,t,i){var r=t;"function"==typeof e?setTimeout(function(){try{r=e(t),"fulfilled"===i?n.fulfill(r):n.reject(r)}catch(e){return void n.reject(e)}},0):n&&("fulfilled"===i?n.fulfill(r):n.reject(r))},fulfilled:[],rejected:[]}},V.Promise.all=function(i){var r=new V.Defer,e=0,n=null,o=0,a=[];if(V._internal.Utils.isArray(i)&&0<i.length){for(e=0;e<i.length;e++)if("object"!=typeof i[e]&&"function"!=typeof i[e]&&"function"!=typeof i[e].then)return r.reject(new V.Reason(18e3)),r.promise;for(n=function(n){var t=!1;i[n].then(function(e){"pending"!==r.promise.status||t||(t=!0,o++,a[n]=e,o===i.length&&r.fulfill(a))},function(e){"pending"!==r.promise.status||t||(t=!0,r.reject(e))})},e=0;e<i.length;e++)n(e)}else r.fulfill([]);return r.promise},V.Promise.prototype={status:"pending",reason:null,value:null,then:function(e,n){var t=new V.Defer;return this._internal.fulfilled.push({func:e,defer:t}),this._internal.rejected.push({func:n,defer:t}),"fulfilled"===this.status?this._internal.executeCallback(e,t,this.value,this.status):"rejected"===this.status&&this._internal.executeCallback(n,t,this.reason,this.status),t.promise}},V.Reason=function(e,n){var t=null;isNaN(e)?(this.errorCode=-1,this.message=e):(this.reasonCode=e,t=V.Reason.prototype.errorCodes[e],this.message="",null!=t&&(void 0!==n&&(t=t.replace("%%data%%",n)),this.message=t))},V.Reason.prototype={errorCodes:{10001:"Handshake time-out expired. (SWAC.Config.TimeOuts.Authentication.Handshake)",11001:"Time-out expired. (SWAC.Config.TimeOuts.Internal)",11002:"Time-out expired. (SWAC.Config.TimeOuts.Proxy.Functions)",11004:"Time-out expired. (SWAC.Config.TimeOuts.Remove)",11005:"Time-out expired. (SWAC.Config.TimeOuts.CleanUp)",11006:"Unhandled time-out expired.",11007:"Invalid target.",11008:"Result message rejected.",11011:"Container unreachable.",11013:"Component not found.",11014:"Error creating Iframe.",12001:"Service not found.",13001:"Invalid Component.",13002:"Component needs to be UI.",13005:"Error creating Iframe.",13006:"Error during component/s creation.",13007:"Time-out expired during IFrame creation. (SWAC.Config.TimeOuts.Create)",13008:"Container.create: Wrong argument(s).",13009:"Aborted by the user.",13010:"Component has been discarded.",13011:"Time-out expired. (beginClose Time-out)",13014:"Method not supported.",13015:"Specified component/s does/do not exist.",14001:"Interface not found.",15001:"Parameter timeout is not a number.",15004:"Dual boot detected. Component has been removed.",15005:"Component integrity is compromised. Component has been removed.",16001:"Event management is not supported.",16002:"Event is not supported.",17e3:"Value not validated.",17001:"Permission denied.",17002:"Corresponding node does no longer exist.",17003:"Unable to add and set a sub-key for a data node.",17004:"Unable to set value on a structural node.",17005:"Internal error.",17006:"Corresponding node does not exist.",18e3:"Wrong parameter, all array elements should be thenable.",18001:"Wrong parameter, method parameter must be an array with at least one thenable.",19e3:"Extension %%data%% could not be loaded. Creation stopped on first failure."}},V.Reason.prototype.toString=function(){return this.message},V.Authentication=function(e){var n=new V.Eventing.Publisher("onFailure"),t=new V.Eventing.Publisher("onSuccess"),i=this,r=V.Guid.generate(),o=e,a="",s=null,l=null,u=function(){if(null===s||null===l)throw new V.Exception(1008);if(s&&"pending"!==s.promise.status&&"fulfilled"!==s.promise.status)throw new V.Exception(1009)},f=function(e){u(),V.Communication._internal.call(o,"tlsMessage",[e])};this.accept=function(){u(),s.fulfill(),t.notify({})},this.reject=function(e){u(),s.reject(e),n.notify({})},this.sendMessage=f,this.isAuthenticated=function(){return null!==s&&"fulfilled"===s.promise.status},this.getDomain=function(){var e,n,t,i="";return null===o?i=a:(e=V.Container.get({name:o}))&&!e.promise&&(i=e._internal.getCurrentUrl()),""!==i&&null!=i&&(i="file"===(i=new RegExp(/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/).exec(i))[1]?i[10]:(n=i[6],""===(t=i[7])||null==t?n:n+":"+t)),i},this.onFailure=n.event,this.onSuccess=t.event,this._internal={receiveMessage:function(e){try{u(),l(e,i)}catch(e){}},beginHandshake:function(e,n,t){if(s)throw new V.Exception(1007);return s=new V.Defer,V.Config.TimeOuts.Enabled&&window.setTimeout(function(){s&&"pending"===s.promise.status&&s.reject(new V.Reason(10001))},t||V.Config.TimeOuts.Authentication.Handshake),l=e,n&&f(n),s.promise},setDomain:function(e){a=e},session:r}},V.Communication=(p={},u=null,f=function(e){return e!==window.parent},h=function(e,n){return JSON.stringify({t:e,c:n})},v=function(e,n,t){e.closed||(e===window.parent&&window.parent===self&&"function"==typeof window.swacPostMessage?swacPostMessage(n,t):e.postMessage(n,t))},o=function(t,i,e){var r=i.g,n=null,o=null,a=null,s=null,l=function(n){return function(e){"string"==typeof r&&function(t,i,e,n,r){var o="",a=function(e,n){return n&&n.d&&n.o&&(e.o=n.d,e.d=n.o),e};if(e){if(t)try{o=n instanceof V.Reason&&17e3===n.reasonCode?{t:"result",g:i,v:n,s:1,e:0}:{t:"result",g:i,e:1},a(o,r),v(t,h("msg",o),"*")}catch(e){}}else null!==n&&"object"==typeof n&&"function"==typeof n.then?(t&&(n.noProlong||(a(o={t:"prolong",g:i},r),v(t,h("msg",o),"*"))),n.then(function(e){var n="";t&&(a(n={t:"result",g:i,v:e,s:0,e:0},r),v(t,h("msg",n),"*"))},function(e){var n="";t&&(a(n={t:"result",g:i,v:e,s:1,e:0},r),v(t,h("msg",n),"*"))})):t&&(a(o={t:"result",g:i,v:n,e:0},r),v(t,h("msg",o),"*"))}(t,r,n,e,i)}};if(f(t)){if(void 0===V.Container)return;(s=V.Container._internal.identify(t))&&!s.promise&&s._internal.setCurrentUrl(e)}else u&&u._internal.setDomain(e);switch(i.t){case"call":if(f(t)){if(void 0===V.Container)break;(s=V.Container._internal.identify(t))&&s._internal[i.m]?(void 0===i.o&&(i.o=V._internal.Utils.getFullName()||["<root>"],i.o.push(s.name())),a=s._internal[i.m].apply(i,i.a),l(!1)(a)):l(!0)(null)}else u&&u._internal[i.m]?(a=u._internal[i.m].apply(u,i.a),l(!1)(a)):l(!0)(null);break;case"begin":if(f(t)){if(void 0===V.Container)break;(s=V.Container._internal.identify(t))&&s._internal[i.m]?(void 0===i.o&&(i.o=V._internal.Utils.getFullName()||["<root>"],i.o.push(s.name())),s._internal[i.m].apply(i,i.a).then(l(!1),l(!0))):l(!0)(null)}else u&&u._internal[i.m]?u._internal[i.m].apply(u,i.a).then(l(!1),l(!0)):l(!0)(null);break;case"prolong":(n=p[r])&&(n.prolonged=!0,V.Config.TimeOuts.Enabled&&window.clearTimeout(n.timer));break;case"result":(o=p[r])&&(o.handled=!0,V.Config.TimeOuts.Enabled&&window.clearTimeout(o.timer),i.e?o.promise.reject(new V.Reason(11008)):i.s?o.promise.reject(i.v):o.promise.fulfill(i.v)),delete p[r]}},n=function(e){if("string"==typeof e.data&&0<e.data.length){var n={},t=["<root>"],i=e.data,r=null;try{if(!((n=JSON.parse(e.data))&&n.t&&n.c))throw new Error("Incompatible message received");if("boot"!==n.t&&"msg"!==n.t)throw new Error("Unknown message received: "+n.t);if(n.c&&n.c.d&&(t=V._internal.Utils.getFullName()||["<root>"]).length!==n.c.d.length&&(void 0===n.c.f&&(n.c.f=!0,i=JSON.stringify(n)),t.length<n.c.d.length&&(r=n.c.d[t.length]),null!==m(r)))return void v(m(r),i,"*")}catch(e){return}switch(n.t){case"boot":!function(e,n,t){var i,r,o,a,s,l,u,f,c,d,g=[];switch(n.message){case"ping":if(void 0===V.Container)break;if(!(i=V.Container._internal.identify(e)))break;if(o=(o="function"==typeof(r=V.Config.Container.URLs.BaseLibrary)?r(n.version):r).replace(V._internal.Utils.trimRegex,""),a=V.Config.Container.Authentication.TlsHandler?V.Config.Container.Authentication.Request?"req":"can":"no",i.lastUrl=t,n.attributes&&(i.attributes=n.attributes),"req"===n.authentication&&"no"===a||"string"!=typeof o)v(e,h("boot",f={message:"peng",reason:"no"===a?"Authentication not supported":"No appropriate SWAC library"}),"*"),V.Container._internal.discard(e);else{if(i.authentication="req"===n.authentication,f={message:"pong",url:o,name:i.name,type:i.type,authentication:"req"===n.authentication?"can":a,containerVersion:V.version,namespace:"SWAC",_internal:{}},u=n.attributes&&n.attributes.control&&V.Config.Control.Extensions&&0<Object.keys(V.Config.Control.Extensions).length&&V.Config.Control.Extensions.constructor===Object?V.Config.Control.Extensions:V.Config.Extensions,n.extensions&&u)for(c=0;c<n.extensions.length;c++)f.extensions=f.extensions||[],u[n.extensions[c]]?f.extensions.push(u[n.extensions[c]]):f.extensions.push("$$unknownExtension$$");f.extensions=f.extensions||[],n.attributes&&n.attributes.control&&(o=(o="function"==typeof(r="string"==typeof V.Config.Control.URLs.BaseLibrary&&""!==V.Config.Control.URLs.BaseLibrary||"function"==typeof V.Config.Control.URLs.BaseLibrary?V.Config.Control.URLs.BaseLibrary:"string"==typeof V.Config.Container.URLs.ControlLibrary&&""!==V.Config.Container.URLs.ControlLibrary||"function"==typeof V.Config.Container.URLs.ControlLibrary?V.Config.Container.URLs.ControlLibrary:"")?r(n.version):r).replace(V._internal.Utils.trimRegex,""),f.extensions.unshift(o)),0<f.extensions.length&&f.extensions.unshift("data:text/javascript;base64,"+window.btoa("var defineExtension = "+function(e,n){this.SWAC.Hub.prototype.Extensions[e]=n}.toString())),v(e,h("boot",f),"*")}break;case"ok":if(void 0===V.Container)break;i=V.Container._internal.identify(e),V.Container._internal.accept(e)?((g=V._internal.Utils.getFullName()||["<root>"]).push(i.name),f={message:"ok2",details:{path:g}},i.settings&&"boolean"==typeof i.settings.designMode&&(f.details.designMode=i.settings.designMode),"function"==typeof V.Container.getLanguage&&(f.details.language=V.Container.getLanguage()),v(e,h("boot",f),"*")):void 0!==(s=V.Container._internal.identify(e))&&(l=s instanceof V.Component?s._internal.iframe:s.iframe,V.Container._internal.remove("function"==typeof s.name?s.name():s.name,l,new V.Reason(15004)),l=null);break;case"failed":if(void 0===V.Container)break;V.Container._internal.discard(e);break;case"pong":break;case"ok2":var p=V._internal.Utils.getBootObj();if(p&&void 0!==p._internal)for(d in n.details||(p._internal.containerInfo.details={path:["<root>"]}),n)"message"!==d&&n.hasOwnProperty(d)&&(p._internal.containerInfo.hasOwnProperty(d)||(p._internal.containerInfo[d]=n[d]))}}(e.source,n.c,e.origin);break;case"msg":o(e.source,n.c,e.origin)}}},m=function(e){var n,t;if(null===e||""===e||void 0===e)return window.parent;if(t=e,void 0===window.constructor?t instanceof window.constructor:t.window===t)return e;if(V.Container){if(!V.Container._internal.checkIframe(e))return V.Container._internal.fireOnFailure(e,"integrityCheck","Component integrity is compromised",!1),V.Container._internal.remove(e,null,new V.Reason(15005)),null;if((n=V.Container.get({name:e}))instanceof V.Component)return n._internal.iframe.contentWindow}return null},r=function(n,e,t,i,r){var o,a,s=n,l=V._internal.Utils.getFullName()||["<root>"],u=r,f=null;if("string"==typeof n)try{u=JSON.parse(n),V._internal.Utils.isArray(u)?(f||(f=u),f.length>l.length&&(s=f[l.length])):s=u}catch(e){f||(f=l.slice(0)).push(n)}else!f&&1<l.length&&(f=l.slice(0,l.length-1));(o=m(s))&&(a=h("msg",f?{t:"call",m:e,a:t,o:i||l,d:f}:{t:"call",m:e,a:t,o:i||l}),v(o,a,"*"))},a=function(e,n,t,i,r,o,a){var s,l,u=V.Guid.generate(),f=new V.Defer,c=m(e),d=0,g={};return r=!0===r,c?(s=function(){return V.Config.TimeOuts.Enabled&&(d=setTimeout(function(){if(!g.handled&&!g.prolonged)switch(t){case"beginExpose":case"show":case"position":case"ready":case"bind":case"beginRequestService":case"beginRequestInterface":case"dpcGet":case"dpcSet":f.reject(new V.Reason(11001));break;case"callService":case"call":f.reject(new V.Reason(11002));break;case"remove":f.reject(new V.Reason(11004));break;case"cleanUp":f.reject(new V.Reason(11005));break;default:f.reject(new V.Reason(11006))}delete p[u]},n)),d},g={guid:u,promise:f,handled:!1,prolonged:!1,timer:s()},p[u]=g,o||(o=V._internal.Utils.getFullName()||["<root>"]),l={t:r?"begin":"call",g:u,m:t,a:i,o:o},a?l.d=a:e?(l.d=o.slice(0),l.d.push(e)):1<o.length&&(l.d=o.slice(0,o.length-1)),l=h("msg",l),v(c,l,"*")):f.reject(new V.Reason(11007)),f.promise},(t=function(){window.addEventListener?(window.addEventListener("message",n,!1),window.addEventListener("unload",function(){window.removeEventListener("message",n)})):(window.attachEvent("onmessage",n),window.attachEvent("onunload",function(){window.detachEvent("onmessage",n)}))})(),{_internal:{beginCall:a,call:r,fire:function(e,n,t,i){r(e,"fire",[n,t,i])},dpcChanged:function(e,n,t,i){0!==n.indexOf("public")&&0!==n.indexOf("private")||r(e,"dpcChanged",[n,t,i])},beginDpcGet:function(e,n){return a(e,V.Config.TimeOuts.Internal,"dpcGet",[n])},beginDpcSet:function(e,n,t,i){return a(e,V.Config.TimeOuts.Internal,"dpcSet",[n,t,i],!0)},associateHub:function(e){u=e},activate:t}}),V.Hub=function(e){if("object"==typeof V.Hub.instance)throw new V.Exception(1e3);var n=new V.Eventing.Publisher("onInterfaceActivated"),r=new V.Eventing.Publisher("onReady"),t=new V.Eventing.Publisher("onRemove"),i=new V.Eventing.Publisher("onVisible"),o=new V.Eventing.Publisher("onPosition"),a=new V.Eventing.Publisher("onCleanUp"),l={},u=null,f=null,c=V.Guid.generate(),d=e,s=[],g=[],p={},h=[],v={},m={},C=new V.Authentication(null),b=function(n,t){return function(e){t&&V._internal.Utils.indexOf(s,t)<0||V.Communication._internal.fire(null,n,e,t)}},y=function(){return function(e,n,t){"add"!==n&&"set"!==n&&"remove"!==n||t.flags!==V.DPC._internal.Flags.Stub&&V.Communication._internal.dpcChanged(null,e,n,t)}},P=function(t){return function(e){var n=y();"onAdded"===t?"node"===e.data.node?n(e.data.key,"add",{isEvent:!0,flags:e.data.flags}):n(e.data.key,"set",{isEvent:!0,flags:e.data.flags}):"onRemoved"===t&&n(e.data.key,"remove",{isEvent:!0})}},w=function(e){var n;for(n=h.length-1;0<=n;n--)h[n]===e&&h.splice(n,1)},_=function(e){var n,t={};for(n in e)"object"!=typeof e[n]&&(t[n]=e[n]);n=null,V.Communication._internal.call(null,"manageEvent",[t]),t=null},x=function(e){0<h.length&&V.Container.get({name:e.data.name}).onMouseEvents.subscribe(null,h,!0)},D=function(e,n){var t,i,r,o,a={},s=[];for(t in e)if(e.hasOwnProperty(t))if("events"===t&&"[object Array]"===Object.prototype.toString.call(e[t]))for(r=0;r<e[t].length;r++)i=e.events[r],-1===s.indexOf(i)&&((o=new V.Eventing.Event(i)).subscribe(b(i,n)),l[n?n+"."+i:i]=o,s.push(i));else"function"==typeof e[t]?a[t]=V._internal.Utils.estractParameters(e[t]):"object"==typeof e[t]&&e[t].subscribe&&1===e[t].subscribe.length&&-1===s.indexOf(t)&&(e[t].subscribe(b(t,n)),s.push(t));return{api:a,events:s}};V.Communication._internal.associateHub(this);var E=function(e){return p.hasOwnProperty(e)?p[e]:{delegable:!1}},O=function(e){return 0<=V._internal.Utils.indexOf(g,e)},R=function(e,n,t,i){return V.Communication._internal.beginCall(null,V.Config.TimeOuts.Proxy.Functions,"callService",[e,n,t],void 0,void 0,i).then(function(e){return e},function(e){throw e})};this.beginExpose=function(){var e,n,t,i,r,o,a=new V.Defer,s="",l=V.DPC._internal.Flags.Stub|V.DPC.Permissions.Read|V.DPC.Permissions.Write;return"object"!=typeof d?(s="Component must be a javascript object",a.reject(s),V.Hub.instance.close(s)):(i=!!d.dpc,r=d.interfaces?V._internal.Utils.getOwnPropertyNames(d.interfaces):[],o=D(d),f=new V.DPC.Node(y(),c,l,null,!0),e=P("onRemoved"),n=P("onAdded"),t=P("onValueChanged"),(u={}).root=f.access(c),u.remHandler=e,u.root.onRemoved.subscribe(e),u.addHandler=n,u.root.onAdded.subscribe(n),u.setHandler=t,u.root.onValueChanged.subscribe(t),V.Communication._internal.beginCall(null,V.Config.TimeOuts.Internal,"beginExpose",[o.api,o.events,i,r,V.version],!0).then(function(e){a.fulfill(e)},function(e){a.reject(e),V.Hub.instance.close(e)})),a.promise},this.beginAuthenticationHandshake=function(e,n,t){return C._internal.beginHandshake(e,n,t)},this.close=function(e){V.Communication._internal.call(null,"close",[e])},this.getDomain=function(){return C.getDomain()},this.fire=function(e,n){l.hasOwnProperty(e)&&l[e].fire(n)},this.isInterfaceActivated=function(e){return!(V._internal.Utils.indexOf(s,e)<0)},this.services={list:function(e){var n,t="",i=[],r=!0,o=0;if("object"!=typeof e)return g;for(o=0;o<g.length;o++){for(t in n=g[o],r=!0,e)if(e.hasOwnProperty(t)&&!(r=void 0!==p[n][t]&&r&&p[n][t]===e[t]))break;r&&i.push(n)}return i},beginGet:function(n){var e,t=new V.Defer,i={},r=!1,o=V._internal.Utils.getBootObj();if(null===o)return t.reject(new V.Reason(17005)),t.promise;if(void 0!==o._internal&&0<=V._internal.Utils.checkVersion(o._internal.containerInfo.containerVersion,"1.4.0")&&(r=!0),v[n])t.fulfill(v[n]);else{if(O(n))return e=E(n),V.Communication._internal.beginCall(null,V.Config.TimeOuts.Internal,"beginRequestService",[n],r,void 0,e.provider).then(function(e){if(i=e)return function(e,n,t,i){var r,o,a,s,l={},u=0;if(!v[e]){for(r in n)n.hasOwnProperty(r)&&(o="return function ("+n[r].join(", ")+') { var myargs = Array.prototype.slice.call(arguments, 0); var args = ["'+r+'", myargs, "'+e+'",'+JSON.stringify(i)+" ];  return fn.apply( ctx, args ); };",l[r]=new Function("ctx","fn",o)(this,R));for(u=0;u<t.length;u++)a=t[u],s=new V.Eventing.Publisher(a),m[e]=m[e]||{},m[e][a]=s,l[a]=s.event;v[e]=l}}(i.name,i.api,i.events,i.provider),v[n];throw new V.Reason(12001)},function(e){throw e});t.reject(new V.Reason(12001))}return t.promise},getInfo:E,has:O},this.onInterfaceActivated=n.event,this.onReady=r.event,this.onRemove=t.event,this.onVisible=i.event,this.onPosition=o.event,this.onCleanUp=a.event,this._internal={bind:function(){var e,n,t,i,r,o=d.dpc,a=0,s=V._internal.Utils.getBootObj();if(u.root.add("private",V.DPC.Permissions.Read),new V.DPC.Node(f,c,V.DPC.Permissions.Read|V.DPC.Permissions.Write|V.DPC._internal.Flags.Stub,"public",!0),this.DPC=f.open("public").access(c),this.status=f.open("private").access(),o&&(e=o.structure)&&V._internal.Utils.isArray(e))for(a=0;a<e.length;a++)if(n=e[a],r=void 0,r=!1,"object"==typeof(i=n)&&"string"==typeof i.key&&(r=!0),r){t=V.DPC.Permissions.Read|V.DPC.Permissions.Write,"string"==typeof n.flags&&("none"===n.flags.toLowerCase()?t=V.DPC.Permissions.None:-1===n.flags.toLowerCase().indexOf("rw")&&-1===n.flags.toLowerCase().indexOf("wr")&&(-1!==n.flags.toLowerCase().indexOf("r")&&(t=V.DPC.Permissions.Read),-1!==n.flags.toLowerCase().indexOf("w")&&(t=V.DPC.Permissions.Write)));try{void 0!==n.value?u.root.open("public").set(n.key,n.value,n.type,t):u.root.open("public").add(n.key,t)}catch(e){}}if(u.root.open("private").set("isDirty",!1,"boolean",V.DPC.Permissions.Read|V.DPC.Permissions.Write),s&&s._internal&&s._internal.containerInfo&&s._internal.containerInfo.details&&"boolean"==typeof s._internal.containerInfo.details.designMode?u.root.open("private").set("isDesignMode",s._internal.containerInfo.details.designMode,"boolean",V.DPC.Permissions.Read):u.root.open("private").set("isDesignMode",!1,"boolean",V.DPC.Permissions.Read),s&&s._internal&&s._internal.containerInfo&&s._internal.containerInfo.details&&"string"==typeof s._internal.containerInfo.details.language?u.root.open("private").set("language",s._internal.containerInfo.details.language,"string",V.DPC.Permissions.Read):u.root.open("private").set("language",navigator.language,"string",V.DPC.Permissions.Read),u.root.open("private").add("extensions"),0<Object.keys(V.Hub.instance.Extensions).length)for(var l in V.Hub.instance.Extensions)V.Hub.instance.Extensions.hasOwnProperty(l)&&u.root.open("private.extensions").set(l,!1,"boolean",V.DPC.Permissions.Read);u.root.onAdded.unsubscribe(u.addHandler),u.root.onRemoved.unsubscribe(u.remHandler),u.root.onValueChanged.unsubscribe(u.setHandler),o&&"function"==typeof o.bind&&o.bind(u.root.open("public"))},remove:function(e){var n=new V.Defer;return t.notify({reason:e,defer:n})||n.fulfill(),n.promise.noProlong=!0,n.promise},ready:function(e,n){var t=new V.Defer,i=0;if("object"==typeof n)g=Object.getOwnPropertyNames(n),p=n;else for(g=e,i=0;i<g.length;i++)p[g[i]]={delegable:!1};return t.promise.then(function(){r.notify({})}),function(){var o=new V.Defer;if(V.Hub.instance.Extensions&&0<Object.keys(V.Hub.instance.Extensions).length){var a=function(n,t){var e,i=function(e){V.Hub.instance.Extensions[n[t]]=e,u.root.open("private.extensions").set(n[t],!0),a(n,++t)},r=function(e){void 0!==V._internal.Utils.getBootObj().Extensions?o.reject(e):(delete V.Hub.instance.Extensions[n[t]],a(n,++t))};t<n.length?"function"==typeof V.Hub.instance.Extensions[n[t]]&&"object"==typeof(e=V.Hub.instance.Extensions[n[t]](V.Hub.instance))?e.then?e.then(function(e){i(e)},r):i(e):r(new V.Reason(19e3,n[t])):o.fulfill()};a(Object.keys(V.Hub.instance.Extensions),0)}else o.fulfill();return o.promise}().then(function(){t.fulfill()},function(e){t.reject(e)}),t.promise},show:function(e){i.notify({visible:e})},enableComponentEvent:function(e,n){var t,i,r,o,a=null,s=null,l=null;for(r=V._internal.Utils.isArray(e)?e:[e],t=0;t<r.length;t++)window.addEventListener(r[t],_,!0);if(V.Container&&"_nested"===n){if(0<(a=V.Container.get()).length){for(t=0;t<a.length;t++){for(o=[],s=a[t],i=0;i<r.length;i++)null!==(l=s._internal.getRegisteredEvent(r[i]))?l.inherited=!0:o.push(r[i]);l=null,0<o.length&&s.onMouseEvents.subscribe(null,o,!0)}s=null}for(0===h.length&&V.Container.onReady.subscribe(x),t=0;t<r.length;t++)h.push(r[t]);a=null}},disableComponentEvent:function(e,n){var t,i,r,o,a=null,s=null,l=null;for(r=V._internal.Utils.isArray(e)?e:[e],t=0;t<r.length;t++)window.removeEventListener(r[t],_,!0);if(V.Container&&"_nested"===n){if(0<(a=V.Container.get()).length)for(t=0;t<a.length;t++){for(o=[],s=a[t],i=0;i<r.length;i++)null!==(l=s._internal.getRegisteredEvent(r[i]))&&(l.inherited&&(l.inherited=!1),0===l.callback.length&&o.push(r[i])),l=null;0<o.length&&s.onMouseEvents.unsubscribe(null,o),s=null}for(t=0;t<r.length;t++)w(r[t]);0===h.length&&V.Container.onReady.unsubscribe(x),a=null}},position:function(e,n,t,i){o.notify({left:e,top:n,width:t,height:i})},call:function(e,n,t){var i="string"==typeof t?d.interfaces[t]:d;return i[e].apply(i,n)},fire:function(e,n,t){m[t]&&m[t][e]&&m[t][e].notify(n.data)},dpcChanged:function(e,n,t){"remove"===n?u.root.remove(e):"add"===n?u.root.add(e,t.flags):"set"===n&&u.root.set(e,t.value,t.type,t.flags,!1)},dpcGet:function(e){return u.root.get(e)},dpcSet:function(e,n,t){return u.root.beginSet(e,t.value,t.type,t.flags).then(function(e){return e.modified||delete e.data,e},function(e){throw e})},tlsMessage:function(e){C._internal.receiveMessage(e)},cleanUp:function(){var e=new V.Defer;return a.notify({defer:e})||e.fulfill(),e.promise},beginRequestInterface:function(e){var n=d.interfaces?V._internal.Utils.getOwnPropertyNames(d.interfaces):[],t=null,i=null;return 0<=V._internal.Utils.indexOf(n,e)&&(t={name:e,api:(i=D(d.interfaces[e],e)).api,events:i.events}),t},interfaceReady:function(e){V._internal.Utils.indexOf(s,e)<0&&(s.push(e),n.notify(e))},setDomain:function(e){C._internal.setDomain(e)},setPrivateDPC:function(e,n){u.root.open("private").set(e,n)}},V.Hub.instance=this},V.Hub.prototype.Extensions={},V.DPC=V.DPC||{},V.DPC.Data=function(e,n,t,i,r,o){var s,a=n,l=7===arguments.length&&arguments[6];!function(e,n,t,i){if(!1===n&&null==e)throw new V.InvalidArgumentException(3002);if(null!=e){if("string"!=typeof e)throw new V.InvalidArgumentException(3003);if(!1===t&&-1!==e.indexOf("."))throw new V.InvalidArgumentException(3004);if(!1===i&&""===e.replace(V._internal.Utils.trimRegex,""))throw new V.InvalidArgumentException(3006)}if(e&&!e.match("^[a-zA-Z0-9_]*$"))throw new V.InvalidArgumentException(3010)}(i,!1,!1,!1);var u=function(e){var n=V.DPC._internal.Flags.None;if("string"==typeof e||"boolean"==typeof e||"function"==typeof e||"object"==typeof e&&null!==e)throw new V.InvalidArgumentException(3007);if(null==e)return V.DPC.Permissions.Read|V.DPC.Permissions.Write;if(e<0)throw new V.InvalidArgumentException(3007);if((e&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub&&(n|=V.DPC._internal.Flags.Stub),(e&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy&&(n|=V.DPC._internal.Flags.Proxy),(e&V.DPC.Permissions.Read)===V.DPC.Permissions.Read&&(n|=V.DPC.Permissions.Read),(e&V.DPC.Permissions.Write)===V.DPC.Permissions.Write&&(n|=V.DPC.Permissions.Write),(n&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub&&(n&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy)throw new V.InvalidArgumentException(3001);return n}(t),f=!1,c=i,d=r,g=o,p=(u&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy,h=(u&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub,v=function(e){return a===e},m=function(e){return!v(e)&&(p||h)||l},C=function(e,n,t){if(s&&s._internal&&s._internal.forward)return s._internal.forward(e,n,t)},b=function(){return u},y=function(e){if(v(e)||(b()&V.DPC.Permissions.Read)===V.DPC.Permissions.Read)return p&&m(e)?C(c,"get",{}):d;throw new V.AccessViolationException(2001)},P=new V.Eventing.Publisher("onBeforeValueChanged"),w=function(e){var n=e.currentValue,t=e.key,i=e.value;P.notify(e),null!==e.reject&&void 0!==e.reject||(e.reject=!1),null!==e.value&&void 0!==e.value||(e.value=i),e.reject||s&&s._internal&&s._internal.fireOnBeforeValueChanged&&(e.currentValue=n,e.key=t,s._internal.fireOnBeforeValueChanged(e))},_=new V.Eventing.Publisher("onValueChanged"),x=function(e,n){_.notify({key:c,relativeKey:c,value:e,oldValue:n}),s&&s._internal&&s._internal.fireOnValueChanged&&s._internal.fireOnValueChanged(c,e,n)},D=function(e,n){var t,i,r,o=null,a={key:c,relativeKey:c,value:n,currentValue:d,reject:!1};if(p||w(a),!a.reject){if(t=3!==arguments.length||arguments[2],!v(e)&&(b()&V.DPC.Permissions.Write)!==V.DPC.Permissions.Write)throw new V.AccessViolationException(2001);(m(e)&&t||!p)&&(p||u!==V.DPC._internal.Flags.Stub)&&C(c,"set",{value:a.value}),p?(r=null,s&&s._internal&&s._internal.getPublicNode&&(r=s._internal.getPublicNode()),o=r,(v(e)||o&&o.componentVersion&&"1.0.0"===o.componentVersion)&&(o&&o.addDpcValues?(i=d,x(d=a.value,i)):x())):(i=d,x(d=a.value,i))}},E=function(e,t){var n,i=new V.Defer,r={key:c,relativeKey:c,value:t,currentValue:d,reject:!1};if(v(e)||(b()&V.DPC.Permissions.Write)===V.DPC.Permissions.Write){if(p)return C(c,"beginset",{value:r.value}).then(function(e){var n=e;return n.modified||(n.data=t),n},function(e){throw e});w(r),r.reject?i.reject(new V.Reason(17e3)):(n=d,x(d=r.value,n),(p||u!==V.DPC._internal.Flags.Stub)&&C(c,"set",{value:r.value}),i.fulfill({modified:!V.DPC.Node.prototype._equals(d,t),data:d}))}else i.reject(new V.Reason(17001));return i.promise},O=function(){return g},R=function(){var e=u;return(e&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub&&(e^=V.DPC._internal.Flags.Stub),(e&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy&&(e^=V.DPC._internal.Flags.Proxy),e},j=function(e){return void 0!==e&&(f=!0),f},A=new V.Eventing.Publisher("onRemoved");if(this.get=y,this.set=D,this.beginSet=E,this.type=O,this.flags=R,this.onRemoved=A.event,this.onBeforeValueChanged=P.event,this._internal={fireOnRemoved:function(){A.notify({key:c,relativeKey:c}),s&&s._internal&&s._internal.fireOnRemoved&&s._internal.fireOnRemoved(c)},fireOnBeforeValueChanged:w,dirty:j,mine:v},this.access=function(t){var i=function(){if(j())throw new V.Exception(1002)},e={type:function(){return i(),O()},flags:function(){return i(),R()},onRemoved:A.event};if(v(t)||(b()&V.DPC.Permissions.Read)===V.DPC.Permissions.Read){var n=function(){return i(),y(t)};p&&m(t)?e.beginGet=n:(e.get=n,e.onBeforeValueChanged=P.event),e.onValueChanged=_.event}return(v(t)||(b()&V.DPC.Permissions.Write)===V.DPC.Permissions.Write)&&(e.set=function(e){var n=2!==arguments.length||arguments[1];i(),D(t,e,n)},e.beginSet=function(e){if(2!==arguments.length||arguments[1],j()){var n=new V.Defer;return n.reject(new V.Reason(17002)),n.promise}return E(t,e)}),e},e instanceof V.DPC.Node){if(!e._internal.mine(n))throw new V.AccessViolationException(2001);(s=e).add(n,i,t,this,r)}else s=void 0},V.DPC._internal=V.DPC._internal||{},V.DPC._internal.Flags={None:0,Proxy:128,Stub:256},V.DPC.Node=function(e,n,t,i){var c=function(e,n,t,i,r){if(!1===n&&null==e)throw new V.InvalidArgumentException(3002);if(null!=e){if("string"!=typeof e)throw new V.InvalidArgumentException(3003);if(!1===t&&-1!==e.indexOf("."))throw new V.InvalidArgumentException(3004);if(0===e.indexOf(".")||0<e.length&&e.lastIndexOf(".")===e.length-1)throw new V.InvalidArgumentException(3005);if(!1===i&&""===e.replace(V._internal.Utils.trimRegex,""))throw new V.InvalidArgumentException(3006)}if(e&&!e.match("^[a-zA-Z0-9_.]*$"))throw new V.InvalidArgumentException(3010)};c(i,!0,!1,!1);var a,d=this,g=5===arguments.length&&arguments[4],r=i,o="function"==typeof e?e:void 0,p=n,u=function(e){var n=V.DPC._internal.Flags.None;if("string"==typeof e||"boolean"==typeof e||"function"==typeof e||"object"==typeof e&&null!==e)throw new V.InvalidArgumentException(3007);if(null==e)return V.DPC.Permissions.Read|V.DPC.Permissions.Write;if(e<0)throw new V.InvalidArgumentException(3007);if((e&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub&&(n|=V.DPC._internal.Flags.Stub),(e&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy&&(n|=V.DPC._internal.Flags.Proxy),(e&V.DPC.Permissions.Read)===V.DPC.Permissions.Read&&(n|=V.DPC.Permissions.Read),(e&V.DPC.Permissions.Write)===V.DPC.Permissions.Write&&(n|=V.DPC.Permissions.Write),(n&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub&&(n&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy)throw new V.InvalidArgumentException(3001);return n}(t),s=!1,h={},l=function(e){return void 0!==e&&(s=!0),s},v=(u&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy,f=(u&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub,m=function(e){return p===e},C=function(e){return m(e)},b=C,y=function(e){return!m(e)&&(v||f)||g},P=function(){return V._internal.Utils.getOwnPropertyNames(h).sort()},w=function(e){var n,t,i=1;if(c(e,!1,!0,!1),""===e||null===e)return d;if(-1<e.indexOf(".")){if(n=e.split("."),void 0===(t=w(n[0])))return;for(i=1;i<n.length;i++){if(void 0===t)return;t=t.open(n[i])}return t}return void 0!==h[e]&&(h[e]instanceof V.DPC.Node||h[e]instanceof V.DPC.Data)?h[e]:void 0},_=function(){return u},x=function(e,n){var t,i,r=1,o=new V.Defer;if(c(n,!1,!0,!0),m(e)||(_()&V.DPC.Permissions.Read)===V.DPC.Permissions.Read){if(""===n||null===n)return v?(o.reject(new V.Reason(17006)),o.promise):void 0;if(-1<n.indexOf(".")){if(t=n.split("."),void 0===(i=w(t[0])))return v?(o.reject(new V.Reason(17006)),o.promise):void 0;if(i instanceof V.DPC.Data&&1<t.length)return v&&y(e)?(o.reject(new V.Reason(17006)),o.promise):void 0;for(r=1;r<t.length-1;r++){if(void 0===i)return v&&y(e)?(o.reject(new V.Reason(17006)),o.promise):void 0;i=i.open(t[r])}return void 0===i?v?(o.reject(new V.Reason(17006)),o.promise):void 0:i.get(e,t[t.length-1])}if(void 0!==h[n]&&h[n]instanceof V.DPC.Data&&h[n].get)return h[n].get(e);if(void 0!==h[n])throw new V.Exception(1003);throw new V.Exception(1004)}throw new V.AccessViolationException(2001)},D=function(e){if(e=null==e?u:e,u===V.DPC._internal.Flags.Stub&&e!==u)throw new V.InvalidArgumentException(3009);return(u&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub?((e&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy&&(e^=V.DPC._internal.Flags.Proxy),e|=V.DPC._internal.Flags.Stub):(u&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy&&((e&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub&&(e^=V.DPC._internal.Flags.Stub),e|=V.DPC._internal.Flags.Proxy),e},E=function(e){var n=e;return r&&a&&(n=r+"."+n),n},O=function(e,n,t){var i=E(e);return o&&"function"==typeof o?o(i,n,t):a&&a._internal&&a._internal.forward?a._internal.forward(i,n,t):void 0},R=function(e,n,t,i,r){var o,a=!(6<=arguments.length)||arguments[5],s=d,l=0;if(c(n,!1,!0,!1),m(e)||(_()&V.DPC.Permissions.Write)===V.DPC.Permissions.Write){if(r=D(r),-1<n.indexOf(".")){for(o=n.split("."),l=0;l<o.length-1;l++){if(!(s instanceof V.DPC.Node))throw new V.Exception(1010);if(0<=V._internal.Utils.indexOf(s.list(),o[l]))s=s.open(o[l]);else{if(!m(e))throw new V.Exception(2001);s=s.add(e,o[l],r)}}if(s instanceof V.DPC.Node)return s.set(e,o[o.length-1],t,i,r,a);throw new V.Exception(1010)}if(void 0===h[n]){if(!m(e))throw new V.Exception(2001);y(e)&&a&&(v||u!==V.DPC._internal.Flags.Stub)&&O(n,"set",{value:t,type:i,flags:r}),h[n]=new V.DPC.Data(d,p,r,n,t,i,g)}else{if(!(h[n]instanceof V.DPC.Data))throw new V.Exception(1006);h[n].set(e,t,a)}return h[n]}throw new V.AccessViolationException(2001)},j=function(e,n,t,i,r){var o=new V.Defer;try{var a,s=!(6<=arguments.length)||arguments[5],l=d,u=0,f=null;if(c(n,!1,!0,!1),m(e)||(_()&V.DPC.Permissions.Write)===V.DPC.Permissions.Write){if(r=D(r),-1<n.indexOf(".")){for(a=n.split("."),u=0;u<a.length-1;u++){if(!(l instanceof V.DPC.Node))return o.reject(new V.Reason(17003)),o.promise;if(0<=V._internal.Utils.indexOf(l.list(),a[u]))l=l.open(a[u]);else{if(!m(e))return o.reject(new V.Reason(17001)),o.promise;l=l.add(e,a[u],r)}}return l instanceof V.DPC.Node?l.beginSet(e,a[a.length-1],t,i,r,s):(o.reject(new V.Reason(17003)),o.promise)}if(f=function(e,n){var t=null;return v?(n.modified||(n.data=e),n):n&&"object"==typeof n&&"boolean"==typeof n.modified?n:(t={modified:!1},V.DPC.Node.prototype._equals(n,e)||(t.modified=!0,t.data=n),t)},void 0===h[n])return m(e)?v?O(n,"beginset",{value:t,type:i,flags:r}):(h[n]=new V.DPC.Data(d,p,r,n,void 0,i,g),h[n].beginSet(e,t,s).then(function(e){o.fulfill(f(t,e))},function(e){o.reject(e)}),o.promise):(o.reject(new V.Reason(17001)),o.promise);if(h[n]instanceof V.DPC.Data)return h[n].beginSet(e,t,s).then(function(e){o.fulfill(f(t,e))},function(e){o.reject(e)}),o.promise;o.reject(new V.Reason(17004))}else o.reject(new V.Reason(17001))}catch(e){o.reject(new V.Reason(17005))}return o.promise},A=new V.Eventing.Publisher("onAdded"),S=function(e,n,t,i,r){var o=E(e);r||(r=e),-1===o.indexOf("public.")&&-1===o.indexOf("private.")||(o=o.substr(o.indexOf(".")+1)),A.notify("node"===n?{key:o,relativeKey:r,node:n,flags:i}:{key:o,relativeKey:r,node:n,value:t,flags:i}),a&&a._internal&&a._internal.fireOnAdded&&a._internal.fireOnAdded(o,n,t,i,r)},F=function(e,n,t,i,r){var o,a,s=1;if(c(n,!1,!0,!1),!C(e))throw new V.AccessViolationException(2001);if(t=D(t),-1<n.indexOf(".")){for(o=n.split("."),a=F(e,o[0],t),s=1;s<o.length;s++)a=a.add(e,o[s],t);return a}return void 0===h[n]&&(null==i?(y(e)&&(v||u!==V.DPC._internal.Flags.Stub)&&O(n,"add",{flags:t}),h[n]=new V.DPC.Node(d,p,t,n,g)):(h[n]=i)instanceof V.DPC.Node?S(n,"node",null,t):S(n,"data",r,t)),h[n]},k=function(e,n){var t,i,r,o,a,s=1;if(c(n,!1,!0,!1),!b(e))throw new V.AccessViolationException(2001);if(-1<n.indexOf(".")){for(t=n.split("."),i=w(t[0]),s=1;s<t.length-1;s++){if(void 0===i)return!1;i=i.open(t[s])}return void 0!==i&&i.remove(e,t[t.length-1])}if(void 0===h[n])return!1;if(h[n]instanceof V.DPC.Node)for(a=(o=h[n].list()).length-1;-1<a;a--)h[n].remove(e,o[a]);return(r=h[n])._internal.dirty(!0),y(e)&&(v||u!==V.DPC._internal.Flags.Stub)&&O(n,"remove",{}),h[n]=null,delete h[n],(r instanceof V.DPC.Data||v)&&r._internal.fireOnRemoved(),!0},I=function(){var e=u;return(e&V.DPC._internal.Flags.Stub)===V.DPC._internal.Flags.Stub&&(e^=V.DPC._internal.Flags.Stub),(e&V.DPC._internal.Flags.Proxy)===V.DPC._internal.Flags.Proxy&&(e^=V.DPC._internal.Flags.Proxy),e},U=new V.Eventing.Publisher("onValueChanged"),N=new V.Eventing.Publisher("onRemoved"),W=new V.Eventing.Publisher("onBeforeValueChanged");if(this.get=x,this.set=R,this.beginSet=j,this.open=w,this.add=F,this.remove=k,this.list=P,this.flags=I,this.nestedKey=E,this.onBeforeValueChanged=W.event,this._internal={forward:O,getPublicNode:function(){return"public"===r?d:a&&a._internal&&a._internal.getPublicNode?a._internal.getPublicNode():h.public},fireOnAdded:S,fireOnRemoved:function(e,n){var t=e?E(e):r;n||(n=e),-1===t.indexOf("public.")&&-1===t.indexOf("private.")||(t=t.substr(t.indexOf(".")+1)),N.notify({key:t,relativeKey:n}),a&&a._internal&&a._internal.fireOnRemoved&&a._internal.fireOnRemoved(t,n)},fireOnValueChanged:function(e,n,t,i){var r=E(e);i||(i=e),-1===r.indexOf("public.")&&-1===r.indexOf("private.")||(r=r.substr(r.indexOf(".")+1)),U.notify({key:r,relativeKey:i,value:n,oldValue:t}),a&&a._internal&&a._internal.fireOnValueChanged&&a._internal.fireOnValueChanged(r,n,t,i)},fireOnBeforeValueChanged:function(e){var n=e.currentValue,t=E(e.key),i=e.value;W.notify(e),null!==e.reject&&void 0!==e.reject||(e.reject=!1),null!==e.value&&void 0!==e.value||(e.value=i),e.reject||a&&a._internal&&a._internal.fireOnBeforeValueChanged&&(e.currentValue=n,e.key=t,a._internal.fireOnBeforeValueChanged(e))},dirty:l,mine:m},this.access=function(a){var s=function(){if(l())throw new V.Exception(1002)},e={list:function(){return s(),P()},open:function(e){var n={};return s(),(n=w(e))instanceof V.DPC.Node||n instanceof V.DPC.Data?n.access(a):void 0},flags:function(){return s(),I()},onRemoved:N.event,onAdded:A.event};if(m(a)||(_()&V.DPC.Permissions.Read)===V.DPC.Permissions.Read){var n=function(e){return s(),x(a,e)};v&&y(a)?e.beginGet=n:(e.get=n,e.onBeforeValueChanged=W.event),e.onValueChanged=U.event}return(m(a)||(_()&V.DPC.Permissions.Write)===V.DPC.Permissions.Write)&&(e.set=function(e,n,t,i){var r=!(5<=arguments.length)||arguments[4],o={};return s(),(o=R(a,e,n,t,i,r))instanceof V.DPC.Data?o.access(a):void 0},e.beginSet=function(e,n,t,i){var r=!(5<=arguments.length)||arguments[4],o=new V.Defer;return l()?(o.reject(new V.Reason(17002)),o.promise):j(a,e,n,t,i,r)}),C(a)&&(e.remove=function(e){return s(),k(a,e)},e.add=function(e,n){var t={};return s(),(t=F(a,e,n))instanceof V.DPC.Node?t.access(a):void 0}),e},e instanceof V.DPC.Node){if(!e._internal.mine(n))throw new V.AccessViolationException(2001);(a=e).add(n,i,t,d)}else a=void 0},V.DPC.Node.prototype._equals=function(e,n){var t,i=!0,r=typeof e,o=null,a=null;if(r!==typeof n)i=!1;else if("object"===r)if(V._internal.Utils.isArray(e)&&V._internal.Utils.isArray(n)){if(e.length!==n.length)i=!1;else for(t=0;t<e.length;t++)if(!V.DPC.Node.prototype._equals(e[t],n[t])){i=!1;break}}else if(V._internal.Utils.isArray(e)||V._internal.Utils.isArray(n))i=!1;else if(null===e&&null===n)i=!0;else if(null===e||null===n)i=!1;else if(o=V._internal.Utils.getOwnPropertyNames(e),a=V._internal.Utils.getOwnPropertyNames(n),o.length!==a.length)i=!1;else for(t=0;t<o.length;t++){if(-1===a.indexOf(o[t])){i=!1;break}if(!V.DPC.Node.prototype._equals(e[o[t]],n[o[t]])){i=!1;break}}else i=e===n;return i},V.DPC.Permissions={None:0,Read:1,Write:2},window.SWAC=new i;else if(void 0!==window.SWAC.constructor.prototype.Communication)i=window.SWAC.constructor;else for(var l in window.SWAC)window.SWAC.hasOwnProperty(l)&&(i.prototype[l]=window.SWAC[l]);"undefined"!=typeof module&&void 0!==module.exports?(module.exports=i,module.exports.default=module.exports):"undefined"!=typeof SystemJS&&(SystemJS.map.hasOwnProperty("@swac/boot")||SystemJS.map.hasOwnProperty("@swac/webcc-boot")||SystemJS.map.hasOwnProperty("@swac/base"))?("undefined"!=typeof define?define:SystemJS.amdDefine)("@swac/base",[],function(){return i}):"function"!=typeof define||void 0===define.amd||"undefined"==typeof requirejs||void 0===requirejs.s.contexts._.config.paths["@swac/boot"]&&void 0===requirejs.s.contexts._.config.paths["@swac/webcc-boot"]&&void 0===requirejs.s.contexts._.config.paths["@swac/base"]||define("@swac/base",[],function(){return i})}catch(e){}}();
//# sourceMappingURL=swac-base.min.map