 SELECT ProdBaseBOM.ProductName,RS.Name AS RouteStepName,BOMItem.ReferenceDesignator, BOMItem.QtyRequired, U.UOMName, BOMItem.Qty2Required, U2.UOMName AS UOM2Name, BOMItem.SetupQty,BOMItem.SetupQty2,BOMItem.ScrapPercent,BOMItem.VendorControl, BOMItem.IsPhantom,PhantomBase.ERPBOMName AS PhantomBill,BOMItem.AllowUnderConsumption, BOMItem.AllowOverConsumption,BOMItem.DefaultLot, BOMItem.DefaultStockPoint, BOMItem.ERPReportingFlag, BOMItem.ERPLineItem, BOMItem.SubFactory, BOMItem.EffectiveFromDate,BOMItem.EffectiveThruDate FROM Container C JOIN Product P ON C.ProductId = P.ProductId  JOIN BOMMaterialListItem BOMItem ON P.ERPBOMId = BOMItem.ERPBOMId JOIN Product ProdBOM ON (ProdBOM.ProductId = BOMItem.ProductId OR ProdBOM.ProductBaseId = BOMItem.ProductBaseId )  JOIN ProductBase ProdBaseBOM ON (ProdBaseBOM.RevOfRcdId = ProdBOM.ProductId OR ProdBaseBOM.ProductBaseId = ProdBOM.ProductBaseId ) LEFT JOIN UOM U ON U.UOMId = BOMItem.UOMId LEFT JOIN UOM U2 ON U2.UOMId = BOMItem.UOM2Id LEFT JOIN RouteStep RS ON RS.RouteStepId = BOMItem.RouteStepId LEFT JOIN ERPBOM Phantom ON Phantom.ERPBOMId = BOMItem.PhantomBillId LEFT JOIN ERPBOMBase PhantomBase ON PhantomBase.ERPBOMBaseId = Phantom.ERPBOMBaseId 
WHERE C.ContainerName=?Container